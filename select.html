<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/jquery.multiSelect.css?v=1.0.0">
</head>
<body>

<div id="multiselect" class="x-select-input" data-first-index="0" data-second-index="0" data-third-index="0">
    <span>请选择</span>
</div>
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="js/jquery.multiSelect.js?v=29"></script>
<script>
    $('#multiselect').click(function (event) {
        event.stopPropagation(); // 阻止冒泡事件
        var that = this,
            // 获取存储的当前选择的index 值；默认打开是之前选中的
            firstIndex = $(that).data('first-index') ? $(that).data('first-index')*1 : 0,
            secondIndex = $(that).data('second-index') ? $(that).data('second-index')*1 : 0,
            thirdIndex = $(that).data('third-index') ? $(that).data('third-index')*1 : 0;

        console.log(firstIndex);
        console.log(secondIndex);
        console.log(thirdIndex);

        console.log('-----开始------');

        $(that).jQueryMultiSelect({
            firstIndex,
            secondIndex,
            thirdIndex,
            list: [
                {
                    id:1,
                    name:'美食122222',
                    childs:[
                        {
                            id:11,
                            name:'美食11',
                            childs:[
                                {
                                    id:111,
                                    name:'美食111',
                                },
                                {
                                    id:112,
                                    name:'美食112',
                                },
                                {
                                    id:113,
                                    name:'美食113',
                                },
                                {
                                    id:114,
                                    name:'美食114',
                                },
                                {
                                    id:115,
                                    name:'美食115',
                                },
                                {
                                    id:116,
                                    name:'美食116',
                                },
                                {
                                    id:117,
                                    name:'美食117',
                                },
                                {
                                    id:118,
                                    name:'美食118',
                                },
                                {
                                    id:119,
                                    name:'美食119',
                                },
                            ]
                        },
                        {
                            id:12,
                            name:'美食12',
                            childs:[
                                {
                                    id:121,
                                    name:'美食121',
                                },
                                {
                                    id:122,
                                    name:'美食122',
                                },
                            ]
                        },
                    ]
                },
                {
                    id:2,
                    name:'美食2',
                    childs:[
                        {
                            id:22,
                            name:'美食22',
                            childs:[
                                {
                                    id:222,
                                    name:'美食222',
                                },
                            ]
                        },
                    ]
                },
                {
                    id:3,
                    name:'美食3',
                    childs:[
                        {
                            id:33,
                            name:'美食33',
                            childs:[]
                        },
                    ]
                },
            ]
        }).confirmSelect(function(res){
            console.log(res);
            var firstCategory = res.firstList.name;
            var secondCategory = res.secondList && '/'+res.secondList.name || '';
            var thirdCategory = res.thirdList && '/'+res.thirdList.name || '';

            // 存储当前选择的index 值
            res.firstList && $(that).data('first-index',res.firstList.index);
            res.secondList && $(that).data('second-index',res.secondList.index);
            res.thirdList && $(that).data('third-index',res.thirdList.index);

            $('#multiselect').find('span').text(firstCategory + ''+secondCategory + '' +thirdCategory );
        });
    });
</script>
</body>
</html>